<div class="container">
  <nav class="navbar navbar-expand-lg navbar-light m-1" style="border:1px solid #cccccc; border-radius: 5px;">
    <a class="navbar-brand" href="#">Planner</a>
    <button class="navbar-toggler" type="button" (click)="isNavbarCollapsed = !isNavbarCollapsed" data-toggle="collapse"
      data-target="#navbarSupportedContent" aria-controls="navbarSupportedContent" aria-expanded="false"
      aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div [ngbCollapse]="isNavbarCollapsed" class="collapse navbar-collapse" id="navbarSupportedContent">
      <ul class="navbar-nav mr-auto">
        <div class="btn-group btn-group-toggle" ngbRadioGroup [(ngModel)]="currentSelection">
          <label *ngIf="canReadEntity(projectFormPermissions)" ngbButtonLabel class="btn-outline-primary btn-sm">
            <input ngbButton type="radio" value="project">Project
          </label>
          <label *ngIf="canReadEntity(productFormPermissions)" ngbButtonLabel class="btn-outline-primary btn-sm">
            <input ngbButton type="radio" value="product">Product
          </label>
          <label *ngIf="canReadEntity(userFormPermissions)" ngbButtonLabel class="btn-outline-primary btn-sm">
            <input ngbButton type="radio" value="user">User
          </label>
          <label *ngIf="canReadEntity(taskFormPermissions)" ngbButtonLabel class="btn-outline-primary btn-sm">
            <input ngbButton type="radio" value="task">Task
          </label>
          <label *ngIf="canReadEntity(taskItemFormPermissions)" ngbButtonLabel class="btn-outline-primary btn-sm">
            <input ngbButton type="radio" value="taskitem">Task item
          </label>
          <label ngbButtonLabel class="btn-outline-primary btn-sm">
            <input ngbButton type="radio" value="erdiagram">ER Diagram
          </label>
          <label *ngIf="canReadEntity(scheduleFormPermissions)" ngbButtonLabel class="btn-outline-primary btn-sm">
            <input ngbButton type="radio" value="jobeditor">Job Editor
          </label>
          <label *ngIf="canReadEntity(scheduleFormPermissions)" ngbButtonLabel class="btn-outline-primary btn-sm">
            <input ngbButton type="radio" value="schedule">Schedule
          </label>
          <label *ngIf="canReadEntity(scheduleFormPermissions)" ngbButtonLabel class="btn-outline-primary btn-sm">
            <input ngbButton type="radio" value="gantt">Gantt Diagram
          </label>
        </div>
      </ul>
      <div class="float-right">
        <button class="btn btn-sm btn-outline-primary" (click)="onLogoutClicked()">Logout
          <span class="pi pi-sign-out align-middle" aria-hidden="true"></span>
        </button>
      </div>
    </div>
  </nav>

  <h1></h1>

  <p-card *ngIf="currentSelection == 'project'">
    <app-crud-table [entityName]="'projects'" [formElements]="projectFormElements"
      [formPermissions]="projectFormPermissions" (rowSelect)="projectSelected($event)" [itemsPerPage]="5"
      [filter]="projectFilter" (backClicked)="goBack()"></app-crud-table>
  </p-card>

  <p-card *ngIf="currentSelection == 'product'">
    <app-crud-table [entityName]="'products'" [formElements]="productFormElements"
      [formPermissions]="productFormPermissions" [itemsPerPage]="5" [filter]="productFilter"
      (cellSelect)="productCellSelected($event)" (backClicked)="goBack()"></app-crud-table>
  </p-card>

  <p-card *ngIf="currentSelection == 'user'">
    <app-crud-table [entityName]="'users'" [formElements]="userFormElements" [formPermissions]="userFormPermissions"
      [itemsPerPage]="5" [filter]="userFilter" (cellSelect)="userCellSelected($event)" (backClicked)="goBack()">
    </app-crud-table>
  </p-card>

  <p-card *ngIf="currentSelection == 'task'">
    <app-crud-table [entityName]="'tasks'" [formElements]="taskFormElements" [formPermissions]="taskFormPermissions"
      [filter]="taskFilter" [itemsPerPage]="5" (cellSelect)="taskCellSelected($event)" (backClicked)="goBack()">
    </app-crud-table>
  </p-card>

  <p-card *ngIf="currentSelection == 'taskitem'">
    <app-crud-table [entityName]="'taskitems'" [formElements]="taskItemFormElements"
      [formPermissions]="taskItemFormPermissions" [filter]="taskItemFilter" [itemsPerPage]="5" (backClicked)="goBack()">
    </app-crud-table>
  </p-card>

  <p-card *ngIf="currentSelection == 'erdiagram'">
    <app-typeorm-erd [entities]="allEntities"></app-typeorm-erd>
  </p-card>

  <p-card *ngIf="currentSelection == 'schedule'">
    <app-crud-table [entityName]="'schedules'" [filter]="''" [formElements]="scheduleFormElements"
      [formPermissions]="scheduleFormPermissions" [itemsPerPage]="5" (rowSelect)="showScheudule($event)"
      (backClicked)="goBack()"></app-crud-table>
  </p-card>

  <p-card *ngIf="currentSelection == 'gantt'">
    <app-gantt-chart [entities]="ganttEntities"></app-gantt-chart>
  </p-card>

  <p-card *ngIf="currentSelection == 'jobeditor'">
    <app-job-editor></app-job-editor>
  </p-card>

</div>